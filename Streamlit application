import streamlit as st

st.title("CORD-19 Data Explorer")
st.write("Simple exploration of COVID-19 research papers")

# Show sample of data
st.subheader("Sample Data")
st.dataframe(df_clean.sample(5))

# Year range slider
year_range = st.slider("Select year range", int(df_clean['year'].min()), int(df_clean['year'].max()), (2020, 2021))

# Filtered data
filtered = df_clean[(df_clean['year'] >= year_range[0]) & (df_clean['year'] <= year_range[1])]

# Publications over time
st.subheader("Publications Over Time")
year_counts = filtered['year'].value_counts().sort_index()
st.bar_chart(year_counts)

# Top journals
st.subheader("Top Journals")
st.bar_chart(filtered['journal'].value_counts().head(10))

# Word cloud
st.subheader("Word Cloud of Titles")
import matplotlib.pyplot as plt
from wordcloud import WordCloud

wordcloud = WordCloud(width=800, height=400, background_color='white').generate(" ".join(filtered['title'].dropna()))
plt.imshow(wordcloud, interpolation='bilinear')
plt.axis("off")
st.pyplot(plt)
